# 时区 {#concept_pvd_mnf_5fb .concept}

本文为您介绍如何设置实时计算作业的时区。

**说明：** 本文档适用于实时计算引擎1.6及以上版本。

## 时区简介 {#section_usq_xpf_5fb .section}

在实时计算平台上您可配置整个Job的时区，默认配置是东八区。时区配置格式 "Asia/Shanghai"，"America/New\_York"，"UTC"等，详细列表见文章最后。

您可以单独对于Source/Sink表配置时区。例如，您要读/写MySQL，但MySQL的Time/Date/Timestamp列的数据是用"America/New\_York"\(美国时区\)，而Job计算需要的时区是"Asia/Shangha"\(中国时区\)，则可以如下单独配置source/Sink的时区。

```
CREATE TABLE mysql_source_my_table (
 -- ... 
) WITH ( 
timeZone='America/New_York'
 -- ... 
)
```

## 示例 {#section_ygb_lqf_5fb .section}

在实时计算引擎1.6及以上版本中，时区相关函数语义上都是自定义的时区。下面以自定义时区是Asia/Shanghai为例进行说明。

-   字符串转时间类型TO\_TIMESTAMP，TIMESTAMP，UNIX\_TIMESTAMP

    ```
    -- Scalar function 
    TO_TIMESTAMP("2018-03-14 19:01:02.123") 
    -- SQL Literal 
    
    TIMESTAMP '2018-03-14 19:01:02.123' 
    -- 输出: 
    -- 实时计算引擎1.6.0及以上版本, `1521025262123`。
    -- 实时计算引擎1.5.x 版本, `1520996462123`。
    -- 类似的还有 UNIX_TIMESTAMP，区别是单位为秒。
    ```

-   时间类型转字符串FROM\_UNIXTIME，DATE\_FORMAT

    **说明：** 当参数​为TIMESTAMP时，输出结果取决于自定义设定的时区。

    ```language-sql
    SELECT DATE_FORMAT(TO_TIMESTAMP(1520960523000), 'yyyy-MM-dd HH:mm:ss') 
    -- 输出: 
    -- 实时计算引擎1.6.0及以上版本, `2018-03-14 01:02:03`。
    -- 实时计算引擎1.5.x 版本， `2018-03-13 15:02:03`。
    
    S​ELECT DATE_FORMAT(TO_TIMESTAMP(1520960523000), 'yyyy-MM-dd HH:mm:ss') 
    -- 输出: 
    -- 实时计算引擎1.6.0及以上版本, `2018-03-14 01:02:03`。
    -- 实时计算引擎1.5.x 版本， `2018-03-13 15:02:03`。
    
    
    --另外，注意下面例子，实时计算引擎1.6.0和实时计算引擎1.5结果都是一致的，因为输入输出时间字符串是同一个时区计算。
    
    DATE_FORMAT('2018-03-14 01:02:03', 'yyyy-MM-dd HH:mm:ss', 'yyyy/MM/dd HH:mm:ss') 
    FROM_UNIXTIME(1521025200000/1000) 
    -- 输出: 
    -- 实时计算引擎1.6.0及以上版本, `2018-03-14 19:00:00`。
    -- 实时计算引擎1.5.x 版本, `2018-03-14 11:00:00`。
    
    ```

-   时间相关计算函数

    当参数​为TIMESTAMP时，EXTRACT/FLOOR/CEIL/DATE\_DIFF等函数输出结果取决于自定义的时区。当输入参数时间为字符串类型，实时计算引擎1.6.0和实时计算引擎1.5结果都是一致的，因为输入输出时间字符串是同一个时区计算。

    ```
    -- 1521503999000 2018-03-19T23:59:59+0000, 2018-03-20T07:59:59+0800
     EXTRACT(DAY FROM TO_TIMESTAMP(1521503999000)) 
    -- 输出: 
    -- 实时计算引擎1.6.0及以上版本, `20`。东八区的20号。
    -- 实时计算引擎1.5.x 版本, `19` 。
    
    ```

-   当前时间函数LOCALTIMESTAMP\(\)、CURRENT\_TIMESTAMP\(\)、NOW\(\)、UNIX\_TIMESTAMP\(\)

    实时计算引擎1.6.0版本中LOCALTIMESTAMP语义有所改变，返回的时间戳当前时刻的时间戳。而在实时计算引擎1.5版本中，因为DATE\_FORMAT中没有时区，为了让DATE\_FORMAT\(CURRENT\_TIMESTAMP\) 结果正确，LOCALTIMESTAMP被错误的额外加上了默认时区的offset。

    ```
    -- 当前时间是 2018-04-03 16:56:10 (Asia/Shanghai) 
    SELECT DATE_FORMAT(CURRENT_TIMESTAMP, ‘yyyy-MM-dd HH:mm:ss’); 
    -- 输出: 
    -- 实时计算引擎1.6.0及以上版本, `2018-04-03 16:56:10`。 
    -- 实时计算引擎1.5.x 版本, `2018-04-03 08:56:10`。 
    
    SELECT DATE_FORMAT(LOCALTIMESTAMP, ‘yyyy-MM-dd HH:mm:ss’); 
    -- 输出: 
    -- 实时计算引擎1.6.0中,`2018-04-03 16:56:10`。 
    -- 实时计算引擎1.5中, `2018-04-03 16:56:10`。 
    -- 输出结果1.5/1.6中相同, 但是要注意到LOCALTIMESTAMP输出的时间戳实际是不同的， 
    SELECT FROM_UNIXTIME(NOW()); SELECT FROM_UNIXTIME(UNIX_TIMESTAMP()); 
    -- 输出: 
    -- 实时计算引擎1.6.0及以上版本, 输出`2018-04-03 16:56:10`。 
    -- 实时计算引擎1.5.x 版本, 输出`2018-04-03 08:56:10`。 
    -- 实时计算引擎1.5 / 实时计算引擎1.6.0中 NOW()、UNIX_TIMESTAMP()语义没有变化都是当前时间戳（单位秒）。输出结果不同是因为FROM_UNIXTIME语义在1.6.0中考虑了时区，以前版本没有考虑时区
    ```

-   Date/Time 类型

    对于Date/Time类型，SQL内部用整数来表示和计算。Date指的是epoch days, Time指的是用户时区的当天的零点开始的毫秒数。如果UDF里对Date/Time进行计算，需要注意的是，从内部类型转换到java.sql.Date/java.sql.Time类型时，java对象里已经加上时区偏移。


## 支持的时区列表 {#section_srl_rsf_5fb .section}

-   Africa/Abidjan
-   Africa/Accra
-   Africa/Addis\_Ababa
-   Africa/Algiers
-   Africa/Asmara
-   Africa/Asmera
-   Africa/Bamako
-   Africa/Bangui
-   Africa/Banjul
-   Africa/Bissau
-   Africa/Blantyre
-   Africa/Brazzaville
-   Africa/Bujumbura
-   Africa/Cairo
-   Africa/Casablanca
-   Africa/Ceuta
-   Africa/Conakry
-   Africa/Dakar
-   Africa/Dar\_es\_Salaam
-   Africa/Djibouti
-   Africa/Douala
-   Africa/El\_Aaiun
-   Africa/Freetown
-   Africa/Gaborone
-   Africa/Harare
-   Africa/Johannesburg
-   Africa/Juba
-   Africa/Kampala
-   Africa/Khartoum
-   Africa/Kigali
-   Africa/Kinshasa
-   Africa/Lagos
-   Africa/Libreville
-   Africa/Lome
-   Africa/Luanda
-   Africa/Lubumbashi
-   Africa/Lusaka
-   Africa/Malabo
-   Africa/Maputo
-   Africa/Maseru
-   Africa/Mbabane
-   Africa/Mogadishu
-   Africa/Monrovia
-   Africa/Nairobi
-   Africa/Ndjamena
-   Africa/Niamey
-   Africa/Nouakchott
-   Africa/Ouagadougou
-   Africa/Porto-Novo
-   Africa/Sao\_Tome
-   Africa/Timbuktu
-   Africa/Tripoli
-   Africa/Tunis
-   Africa/Windhoek
-   America/Adak
-   America/Anchorage
-   America/Anguilla
-   America/Antigua
-   America/Araguaina
-   America/Argentina/Buenos\_Aires
-   America/Argentina/Catamarca
-   America/Argentina/ComodRivadavia
-   America/Argentina/Cordoba
-   America/Argentina/Jujuy
-   America/Argentina/La\_Rioja
-   America/Argentina/Mendoza
-   America/Argentina/Rio\_Gallegos
-   America/Argentina/Salta
-   America/Argentina/San\_Juan
-   America/Argentina/San\_Luis
-   America/Argentina/Tucuman
-   America/Argentina/Ushuaia
-   America/Aruba
-   America/Asuncion
-   America/Atikokan
-   America/Atka
-   America/Bahia
-   America/Bahia\_Banderas
-   America/Barbados
-   America/Belem
-   America/Belize
-   America/Blanc-Sablon
-   America/Boa\_Vista
-   America/Bogota
-   America/Boise
-   America/Buenos\_Aires
-   America/Cambridge\_Bay
-   America/Campo\_Grande
-   America/Cancun
-   America/Caracas
-   America/Catamarca
-   America/Cayenne
-   America/Cayman
-   America/Chicago
-   America/Chihuahua
-   America/Coral\_Harbour
-   America/Cordoba
-   America/Costa\_Rica
-   America/Creston
-   America/Cuiaba
-   America/Curacao
-   America/Danmarkshavn
-   America/Dawson
-   America/Dawson\_Creek
-   America/Denver
-   America/Detroit
-   America/Dominica
-   America/Edmonton
-   America/Eirunepe
-   America/El\_Salvador
-   America/Ensenada
-   America/Fort\_Nelson
-   America/Fort\_Wayne
-   America/Fortaleza
-   America/Glace\_Bay
-   America/Godthab
-   America/Goose\_Bay
-   America/Grand\_Turk
-   America/Grenada
-   America/Guadeloupe
-   America/Guatemala
-   America/Guayaquil
-   America/Guyana
-   America/Halifax
-   America/Havana
-   America/Hermosillo
-   America/Indiana/Indianapolis
-   America/Indiana/Knox
-   America/Indiana/Marengo
-   America/Indiana/Petersburg
-   America/Indiana/Tell\_City
-   America/Indiana/Vevay
-   America/Indiana/Vincennes
-   America/Indiana/Winamac
-   America/Indianapolis
-   America/Inuvik
-   America/Iqaluit
-   America/Jamaica
-   America/Jujuy
-   America/Juneau
-   America/Kentucky/Louisville
-   America/Kentucky/Monticello
-   America/Knox\_IN
-   America/Kralendijk
-   America/La\_Paz
-   America/Lima
-   America/Los\_Angeles
-   America/Louisville
-   America/Lower\_Princes
-   America/Maceio
-   America/Managua
-   America/Manaus
-   America/Marigot
-   America/Martinique
-   America/Matamoros
-   America/Mazatlan
-   America/Mendoza
-   America/Menominee
-   America/Merida
-   America/Metlakatla
-   America/Mexico\_City
-   America/Miquelon
-   America/Moncton
-   America/Monterrey
-   America/Montevideo
-   America/Montreal
-   America/Montserrat
-   America/Nassau
-   America/New\_York
-   America/Nipigon
-   America/Nome
-   America/Noronha
-   America/North\_Dakota/Beulah
-   America/North\_Dakota/Center
-   America/North\_Dakota/New\_Salem
-   America/Ojinaga
-   America/Panama
-   America/Pangnirtung
-   America/Paramaribo
-   America/Phoenix
-   America/Port-au-Prince
-   America/Port\_of\_Spain
-   America/Porto\_Acre
-   America/Porto\_Velho
-   America/Puerto\_Rico
-   America/Punta\_Arenas
-   America/Rainy\_River
-   America/Rankin\_Inlet
-   America/Recife
-   America/Regina
-   America/Resolute
-   America/Rio\_Branco
-   America/Rosario
-   America/Santa\_Isabel
-   America/Santarem
-   America/Santiago
-   America/Santo\_Domingo
-   America/Sao\_Paulo
-   America/Scoresbysund
-   America/Shiprock
-   America/Sitka
-   America/St\_Barthelemy
-   America/St\_Johns
-   America/St\_Kitts
-   America/St\_Lucia
-   America/St\_Thomas
-   America/St\_Vincent
-   America/Swift\_Current
-   America/Tegucigalpa
-   America/Thule
-   America/Thunder\_Bay
-   America/Tijuana
-   America/Toronto
-   America/Tortola
-   America/Vancouver
-   America/Virgin
-   America/Whitehorse
-   America/Winnipeg
-   America/Yakutat
-   America/Yellowknife
-   Antarctica/Casey
-   Antarctica/Davis
-   Antarctica/DumontDUrville
-   Antarctica/Macquarie
-   Antarctica/Mawson
-   Antarctica/McMurdo
-   Antarctica/Palmer
-   Antarctica/Rothera
-   Antarctica/South\_Pole
-   Antarctica/Syowa
-   Antarctica/Troll
-   Antarctica/Vostok
-   Arctic/Longyearbyen
-   Asia/Aden
-   Asia/Almaty
-   Asia/Amman
-   Asia/Anadyr
-   Asia/Aqtau
-   Asia/Aqtobe
-   Asia/Ashgabat
-   Asia/Ashkhabad
-   Asia/Atyrau
-   Asia/Baghdad
-   Asia/Bahrain
-   Asia/Baku
-   Asia/Bangkok
-   Asia/Barnaul
-   Asia/Beirut
-   Asia/Bishkek
-   Asia/Brunei
-   Asia/Calcutta
-   Asia/Chita
-   Asia/Choibalsan
-   Asia/Chongqing
-   Asia/Chungking
-   Asia/Colombo
-   Asia/Dacca
-   Asia/Damascus
-   Asia/Dhaka
-   Asia/Dili
-   Asia/Dubai
-   Asia/Dushanbe
-   Asia/Famagusta
-   Asia/Gaza
-   Asia/Harbin
-   Asia/Hebron
-   Asia/Ho\_Chi\_Minh
-   Asia/Hong\_Kong
-   Asia/Hovd
-   Asia/Irkutsk
-   Asia/Istanbul
-   Asia/Jakarta
-   Asia/Jayapura
-   Asia/Jerusalem
-   Asia/Kabul
-   Asia/Kamchatka
-   Asia/Karachi
-   Asia/Kashgar
-   Asia/Kathmandu
-   Asia/Katmandu
-   Asia/Khandyga
-   Asia/Kolkata
-   Asia/Krasnoyarsk
-   Asia/Kuala\_Lumpur
-   Asia/Kuching
-   Asia/Kuwait
-   Asia/Macao
-   Asia/Macau
-   Asia/Magadan
-   Asia/Makassar
-   Asia/Manila
-   Asia/Muscat
-   Asia/Nicosia
-   Asia/Novokuznetsk
-   Asia/Novosibirsk
-   Asia/Omsk
-   Asia/Oral
-   Asia/Phnom\_Penh
-   Asia/Pontianak
-   Asia/Pyongyang
-   Asia/Qatar
-   Asia/Qyzylorda
-   Asia/Rangoon
-   Asia/Riyadh
-   Asia/Saigon
-   Asia/Sakhalin
-   Asia/Samarkand
-   Asia/Seoul
-   Asia/Shanghai
-   Asia/Singapore
-   Asia/Srednekolymsk
-   Asia/Taipei
-   Asia/Tashkent
-   Asia/Tbilisi
-   Asia/Tehran
-   Asia/Tel\_Aviv
-   Asia/Thimbu
-   Asia/Thimphu
-   Asia/Tokyo
-   Asia/Tomsk
-   Asia/Ujung\_Pandang
-   Asia/Ulaanbaatar
-   Asia/Ulan\_Bator
-   Asia/Urumqi
-   Asia/Ust-Nera
-   Asia/Vientiane
-   Asia/Vladivostok
-   Asia/Yakutsk
-   Asia/Yangon
-   Asia/Yekaterinburg
-   Asia/Yerevan
-   Atlantic/Azores
-   Atlantic/Bermuda
-   Atlantic/Canary
-   Atlantic/Cape\_Verde
-   Atlantic/Faeroe
-   Atlantic/Faroe
-   Atlantic/Jan\_Mayen
-   Atlantic/Madeira
-   Atlantic/Reykjavik
-   Atlantic/South\_Georgia
-   Atlantic/St\_Helena
-   Atlantic/Stanley
-   Australia/ACT
-   Australia/Adelaide
-   Australia/Brisbane
-   Australia/Broken\_Hill
-   Australia/Canberra
-   Australia/Currie
-   Australia/Darwin
-   Australia/Eucla
-   Australia/Hobart
-   Australia/LHI
-   Australia/Lindeman
-   Australia/Lord\_Howe
-   Australia/Melbourne
-   Australia/NSW
-   Australia/North
-   Australia/Perth
-   Australia/Queensland
-   Australia/South
-   Australia/Sydney
-   Australia/Tasmania
-   Australia/Victoria
-   Australia/West
-   Australia/Yancowinna
-   Brazil/Acre
-   Brazil/DeNoronha
-   Brazil/East
-   Brazil/West
-   CET
-   CST6CDT
-   Canada/Atlantic
-   Canada/Central
-   Canada/Eastern
-   Canada/Mountain
-   Canada/Newfoundland
-   Canada/Pacific
-   Canada/Saskatchewan
-   Canada/Yukon
-   Chile/Continental
-   Chile/EasterIsland
-   Cuba
-   EET
-   EST5EDT
-   Egypt
-   Eire
-   Etc/GMT
-   Etc/GMT+0
-   Etc/GMT+1
-   Etc/GMT+10
-   Etc/GMT+11
-   Etc/GMT+12
-   Etc/GMT+2
-   Etc/GMT+3
-   Etc/GMT+4
-   Etc/GMT+5
-   Etc/GMT+6
-   Etc/GMT+7
-   Etc/GMT+8
-   Etc/GMT+9
-   Etc/GMT-0
-   Etc/GMT-1
-   Etc/GMT-10
-   Etc/GMT-11
-   Etc/GMT-12
-   Etc/GMT-13
-   Etc/GMT-14
-   Etc/GMT-2
-   Etc/GMT-3
-   Etc/GMT-4
-   Etc/GMT-5
-   Etc/GMT-6
-   Etc/GMT-7
-   Etc/GMT-8
-   Etc/GMT-9
-   Etc/GMT0
-   Etc/Greenwich
-   Etc/UCT
-   Etc/UTC
-   Etc/Universal
-   Etc/Zulu
-   Europe/Amsterdam
-   Europe/Andorra
-   Europe/Astrakhan
-   Europe/Athens
-   Europe/Belfast
-   Europe/Belgrade
-   Europe/Berlin
-   Europe/Bratislava
-   Europe/Brussels
-   Europe/Bucharest
-   Europe/Budapest
-   Europe/Busingen
-   Europe/Chisinau
-   Europe/Copenhagen
-   Europe/Dublin
-   Europe/Gibraltar
-   Europe/Guernsey
-   Europe/Helsinki
-   Europe/Isle\_of\_Man
-   Europe/Istanbul
-   Europe/Jersey
-   Europe/Kaliningrad
-   Europe/Kiev
-   Europe/Kirov
-   Europe/Lisbon
-   Europe/Ljubljana
-   Europe/London
-   Europe/Luxembourg
-   Europe/Madrid
-   Europe/Malta
-   Europe/Mariehamn
-   Europe/Minsk
-   Europe/Monaco
-   Europe/Moscow
-   Europe/Nicosia
-   Europe/Oslo
-   Europe/Paris
-   Europe/Podgorica
-   Europe/Prague
-   Europe/Riga
-   Europe/Rome
-   Europe/Samara
-   Europe/San\_Marino
-   Europe/Sarajevo
-   Europe/Saratov
-   Europe/Simferopol
-   Europe/Skopje
-   Europe/Sofia
-   Europe/Stockholm
-   Europe/Tallinn
-   Europe/Tirane
-   Europe/Tiraspol
-   Europe/Ulyanovsk
-   Europe/Uzhgorod
-   Europe/Vaduz
-   Europe/Vatican
-   Europe/Vienna
-   Europe/Vilnius
-   Europe/Volgograd
-   Europe/Warsaw
-   Europe/Zagreb
-   Europe/Zaporozhye
-   Europe/Zurich
-   GB
-   GB-Eire
-   GMT
-   GMT0
-   Greenwich
-   Hongkong
-   Iceland
-   Indian/Antananarivo
-   Indian/Chagos
-   Indian/Christmas
-   Indian/Cocos
-   Indian/Comoro
-   Indian/Kerguelen
-   Indian/Mahe
-   Indian/Maldives
-   Indian/Mauritius
-   Indian/Mayotte
-   Indian/Reunion
-   Iran
-   Israel
-   Jamaica
-   Japan
-   Kwajalein
-   Libya
-   MET
-   MST7MDT
-   Mexico/BajaNorte
-   Mexico/BajaSur
-   Mexico/General
-   NZ
-   NZ-CHAT
-   Navajo
-   PRC
-   PST8PDT
-   Pacific/Apia
-   Pacific/Auckland
-   Pacific/Bougainville
-   Pacific/Chatham
-   Pacific/Chuuk
-   Pacific/Easter
-   Pacific/Efate
-   Pacific/Enderbury
-   Pacific/Fakaofo
-   Pacific/Fiji
-   Pacific/Funafuti
-   Pacific/Galapagos
-   Pacific/Gambier
-   Pacific/Guadalcanal
-   Pacific/Guam
-   Pacific/Honolulu
-   Pacific/Johnston
-   Pacific/Kiritimati
-   Pacific/Kosrae
-   Pacific/Kwajalein
-   Pacific/Majuro
-   Pacific/Marquesas
-   Pacific/Midway
-   Pacific/Nauru
-   Pacific/Niue
-   Pacific/Norfolk
-   Pacific/Noumea
-   Pacific/Pago\_Pago
-   Pacific/Palau
-   Pacific/Pitcairn
-   Pacific/Pohnpei
-   Pacific/Ponape
-   Pacific/Port\_Moresby
-   Pacific/Rarotonga
-   Pacific/Saipan
-   Pacific/Samoa
-   Pacific/Tahiti
-   Pacific/Tarawa
-   Pacific/Tongatapu
-   Pacific/Truk
-   Pacific/Wake
-   Pacific/Wallis
-   Pacific/Yap
-   Poland
-   Portugal
-   ROK
-   Singapore
-   SystemV/AST4
-   SystemV/AST4ADT
-   SystemV/CST6
-   SystemV/CST6CDT
-   SystemV/EST5
-   SystemV/EST5EDT
-   SystemV/HST10
-   SystemV/MST7
-   SystemV/MST7MDT
-   SystemV/PST8
-   SystemV/PST8PDT
-   SystemV/YST9
-   SystemV/YST9YDT
-   Turkey
-   UCT
-   US/Alaska
-   US/Aleutian
-   US/Arizona
-   US/Central
-   US/East-Indiana
-   US/Eastern
-   US/Hawaii
-   US/Indiana-Starke
-   US/Michigan
-   US/Mountain
-   US/Pacific
-   US/Pacific-New
-   US/Samoa
-   UTC
-   Universal
-   W-SU
-   WET
-   Zulu

