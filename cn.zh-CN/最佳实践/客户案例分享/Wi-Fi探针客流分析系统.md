# Wi-Fi探针客流分析系统 {#concept_74864_zh .concept}

本文为通过案例为您介绍如何使用实时计算完成Wi-Fi探针客流分析系统。

## 业务简介 {#section_ksc_p5m_2gb .section}

随着电商的发展，传统零售业持续萎靡， 据中国连锁经营协会的调查，2015年全国连锁百强企业销售增长4.3％，增幅连续6年回落，其中31家企业销售出现负增长；连锁百强企业净利润率仅为1.8％，同比下降0.1个百分点，约55％的企业净利润率出现不同程度的下降。 新零售线上线下一体这个概念的提出，为线下商场的发展指明了方向，很多商场&超市纷纷升级，拥抱互联网。 这里举一个例子是上海欧新软件基于实时计算对其一个大型商场做出的智能化改造： 一方面掌握整个商场的运营情况； 一方面做一些针对性的改进，升级业务； 具体来说包括下面几个方面：

-   客流信息：
    -   每天有多少顾客来光顾商场？
    -   其中多少是新客、多少是常客？
    -   什么时间段顾客最多？
    -   顾客一般停留多长时间？
-   商品策略：
    -   顾客对哪些商铺、商品比较有兴趣？
    -   哪些商铺或商品没什么客户关注？
    -   新客、常客一般集中在哪些楼层？
-   营销规划：
    -   活动安排在哪些时间段，来的顾客会比较多？
-   顾客画像：
    -   顾客一般是哪些类型的顾客？
    -   男性多还是女性多？
    -   年纪一般是几岁左右？
    -   收入一般有多少？
-   广告投放
    -   如何有效地投放广告、让真正有兴趣的潜在顾客收到广告？

## 基于实时计算，轻松完成需求 {#section_r3d_wvm_2gb .section}

基于实时计算，轻松完成需求

![实时计算数据流](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/41099/154857805234771_zh-CN.png)

整个数据流非常简单，首先是采集设备信息，使用的技术是wifi探针，然后把采集的数据经过slb发送到接受服务器，进而发送到DataHub，实时计算订阅DataHub，完成处理，然后把结果写出即可供下游使用。

实时计算的处理包括：

1.  数据清洗、去重。
2.  维表关联，实时数据与历史数据结合起来分析。
3.  手机品牌识别，位置识别，新客识别。
4.  计算停留时间、生成生活轨迹。

## 效果展示 {#section_vcw_fwm_2gb .section}

-   楼层热力图

    通过实时客流分析系统，制作每个楼层的实时热力图，不同颜色代表客流人数的密集程度。

    ![楼层热力图](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/41099/154857805234772_zh-CN.png)

-   **客流信息汇总图**

    ![客流信息汇总图](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/41099/154857805234773_zh-CN.png)

-   扩展服务——用户画像

    如果将Wi-Fi探针收集到的顾客的MAC地址和线上的数据进行碰撞，可以获取顾客画像。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/41099/154857805334774_zh-CN.png)

-   扩展服务——实时位置定向广告

    实时命中目标地点围栏人群实时广告应用，多样命中引擎规则，可选个性化处理。

    ![实时位置定向广告](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/41099/154857805334775_zh-CN.png)


## 系统数据与客户收益 {#section_btn_vwm_2gb .section}

-   系统参数
    -    2000台设备 
    -   实时计算处理输入30K条/s ，输出20K条/s ，平均延时秒级。
-   开发效率
    -   单job开发从原来的java开发3天降低到sql开发1天内，并且bug较少。
    -   整个业务使用sql重构只用了一周。

